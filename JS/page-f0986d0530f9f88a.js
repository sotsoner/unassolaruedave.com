(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[467],{285:(e,t,a)=>{"use strict";a.d(t,{$:()=>o});var s=a(5155),r=a(2115),n=a(9708),l=a(2085),i=a(9434);let d=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,t)=>{let{className:a,variant:r,size:l,asChild:o=!1,...c}=e,m=o?n.DX:"button";return(0,s.jsx)(m,{className:(0,i.cn)(d({variant:r,size:l,className:a})),ref:t,...c})});o.displayName="Button"},2523:(e,t,a)=>{"use strict";a.d(t,{p:()=>l});var s=a(5155),r=a(2115),n=a(9434);let l=r.forwardRef((e,t)=>{let{className:a,type:r,...l}=e;return(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...l})});l.displayName="Input"},3311:(e,t,a)=>{Promise.resolve().then(a.bind(a,5110))},4165:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>m,Es:()=>p,L3:()=>f,c7:()=>u,lG:()=>d,rr:()=>x});var s=a(5155),r=a(2115),n=a(5452),l=a(4416),i=a(9434);let d=n.bL;n.l9;let o=n.ZL;n.bm;let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.hJ,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});c.displayName=n.hJ.displayName;let m=r.forwardRef((e,t)=>{let{className:a,children:r,...d}=e;return(0,s.jsxs)(o,{children:[(0,s.jsx)(c,{}),(0,s.jsxs)(n.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[r,(0,s.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(l.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.UC.displayName;let u=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};u.displayName="DialogHeader";let p=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};p.displayName="DialogFooter";let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});f.displayName=n.hE.displayName;let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})});x.displayName=n.VY.displayName},5057:(e,t,a)=>{"use strict";a.d(t,{J:()=>o});var s=a(5155),r=a(2115),n=a(968),l=a(2085),i=a(9434);let d=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.b,{ref:t,className:(0,i.cn)(d(),a),...r})});o.displayName=n.b.displayName},5110:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>J});var s=a(5155),r=a(2115),n=a(6766),l=a(5695),i=a(8779),d=a(2177),o=a(2030),c=a(7129),m=a(6695),u=a(285),p=a(2523),f=a(5057),x=a(4059),h=a(9428),g=a(9434);let j=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(x.bL,{className:(0,g.cn)("grid gap-2",a),...r,ref:t})});j.displayName=x.bL.displayName;let y=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsx)(x.q7,{ref:t,className:(0,g.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...n,children:(0,s.jsx)(x.C1,{className:"flex items-center justify-center",children:(0,s.jsx)(h.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});y.displayName=x.q7.displayName;var b=a(8715),v=a(6474),N=a(7863),w=a(5196);let k=b.bL;b.YJ;let C=b.WT,E=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(b.l9,{ref:t,className:(0,g.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[r,(0,s.jsx)(b.In,{asChild:!0,children:(0,s.jsx)(v.A,{className:"h-4 w-4 opacity-50"})})]})});E.displayName=b.l9.displayName;let R=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(b.PP,{ref:t,className:(0,g.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(N.A,{className:"h-4 w-4"})})});R.displayName=b.PP.displayName;let P=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(b.wn,{ref:t,className:(0,g.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(v.A,{className:"h-4 w-4"})})});P.displayName=b.wn.displayName;let S=r.forwardRef((e,t)=>{let{className:a,children:r,position:n="popper",...l}=e;return(0,s.jsx)(b.ZL,{children:(0,s.jsxs)(b.UC,{ref:t,className:(0,g.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...l,children:[(0,s.jsx)(R,{}),(0,s.jsx)(b.LM,{className:(0,g.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(P,{})]})})});S.displayName=b.UC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(b.JU,{ref:t,className:(0,g.cn)("px-2 py-1.5 text-sm font-semibold",a),...r})}).displayName=b.JU.displayName;let T=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(b.q7,{ref:t,className:(0,g.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(b.VF,{children:(0,s.jsx)(w.A,{className:"h-4 w-4"})})}),(0,s.jsx)(b.p4,{children:r})]})});T.displayName=b.q7.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(b.wv,{ref:t,className:(0,g.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=b.wv.displayName;var D=a(4165);let F=(0,a(2085).F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),L=r.forwardRef((e,t)=>{let{className:a,variant:r,...n}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,g.cn)(F({variant:r}),a),...n})});L.displayName="Alert";let A=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h5",{ref:t,className:(0,g.cn)("mb-1 font-medium leading-none tracking-tight",a),...r})});A.displayName="AlertTitle";let I=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,g.cn)("text-sm [&_p]:leading-relaxed",a),...r})});I.displayName="AlertDescription";var q=a(1243),U=a(1154);let O=()=>{let[e,t]=(0,r.useState)(null),[a,s]=(0,r.useState)(null),[n,l]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(async()=>{try{let e=await i.u.get("/exchange-rate/");t(e.rate),console.log(e),s(null)}catch(e){console.error("Error fetching exchange rate:",e),s(e)}finally{l(!1)}})()},[]),{data:e,error:a,isLoading:n}},B=c.Ik().shape({name:c.Yj().required("Debe ingresar su nombre"),email:c.Yj().email("Debe ingresar un email v\xe1lido").test("is-gmail","Solo se aceptan correos de Gmail (@gmail.com)",e=>!!e&&e.toLowerCase().endsWith("@gmail.com")).required("Debe ingresar su email"),confirmEmail:c.Yj().oneOf([c.KR("email")],"Los correos electr\xf3nicos deben coincidir").required("Debe confirmar su email"),phone:c.Yj().required("Debe ingresar su n\xfamero de tel\xe9fono"),ticketQuantity:c.ai().typeError("La cantidad de tickets debe ser un n\xfamero.").min(2,"La cantidad m\xednima de tickets es 2.").required("Debe seleccionar la cantidad de tickets"),paymentMethod:c.Yj().required("Debe seleccionar un m\xe9todo de pago"),referenceCode:c.Yj().required("Debe ingresar un c\xf3digo de referencia"),accountName:c.Yj().required("Debe ingresar el nombre del titular de la cuenta"),paymentProof:c.gl().test("required","Debe adjuntar un comprobante",e=>e instanceof FileList&&e.length>0)}),M=(e,t,a,s)=>new Promise((r,n)=>{let l=new FileReader;l.readAsDataURL(e),l.onload=l=>{var i;let d=new window.Image;d.src=null===(i=l.target)||void 0===i?void 0:i.result,d.onload=()=>{let l=document.createElement("canvas"),i=d.width,o=d.height;i>o?i>t&&(o*=t/i,i=t):o>a&&(i*=a/o,o=a),l.width=i,l.height=o;let c=l.getContext("2d");null==c||c.drawImage(d,0,0,i,o),l.toBlob(t=>{t?r(new File([t],e.name,{type:"image/jpeg",lastModified:Date.now()})):n(Error("Canvas to Blob conversion failed"))},"image/jpeg",s)}},l.onerror=e=>n(e)});function J(){var e,t,a;let{data:c,isLoading:x}=O(),{id:h}=(0,l.useParams)(),[g,b]=(0,r.useState)(null),[v,N]=(0,r.useState)(!0),[w,R]=(0,r.useState)(null),[P,F]=(0,r.useState)(!1),[J,Q]=(0,r.useState)(!1),[V,z]=(0,r.useState)(!1),[Z,Y]=(0,r.useState)(null),[$,_]=(0,r.useState)(0),[H,W]=(0,r.useState)(2),[G,K]=(0,r.useState)(null),[X,ee]=(0,r.useState)(""),[et,ea]=(0,r.useState)(!1),[es,er]=(0,r.useState)(null),[en,el]=(0,r.useState)([]),{register:ei,handleSubmit:ed,watch:eo,control:ec,setValue:em,reset:eu,formState:{errors:ep}}=(0,d.mN)({resolver:(0,o.t)(B),defaultValues:{name:"",email:"",confirmEmail:"",phone:"",ticketQuantity:2,paymentMethod:"",referenceCode:"",paymentProof:void 0,accountName:""}}),ef=eo("ticketQuantity"),ex=eo("paymentMethod"),eh=eo("paymentProof"),eg=x?"Cargando...":c?($*c).toFixed(2):"0.00";(0,r.useEffect)(()=>{let e=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;try{let e=await i.u.get("/raffles/public/".concat(h));b(e),N(!1),F(!1)}catch(a){console.error("Error fetching raffle data:",a),t<3?setTimeout(()=>e(t+1),1e3*(t+1)):(R("Failed to fetch raffle data"),N(!1))}};e()},[h]),(0,r.useEffect)(()=>{g&&ej(Number(ef))},[ef,g]),(0,r.useEffect)(()=>()=>{G&&URL.revokeObjectURL(G)},[G]);let ej=e=>{if(!g)return;let t=parseFloat((e*parseFloat(g.price)).toFixed(2));_(isNaN(t)?0:t),W(e)},ey=async e=>{if(!g)return;Q(!0),Y(null);let t=e.paymentProof[0];try{let a=await M(t,1024,1024,.8),s=new FormData;s.append("name",e.name),s.append("email",e.email),s.append("phone",e.phone),s.append("raffleId",g.id),s.append("ticketCount",e.ticketQuantity.toString()),s.append("paymentReference",e.referenceCode),s.append("paymentData",new Date().getTime().toString()),s.append("paymentScreenshot",a),s.append("paymentMethod",e.paymentMethod),s.append("accountName",e.accountName);let r=await i.u.post("/tickets/buy-tickets",s,{headers:{"Content-Type":"multipart/form-data"}});"pending"===r.status&&(z(!0),ew())}catch(e){console.error("Error purchasing tickets:",e),Y("Hubo un error al procesar su compra. Por favor, int\xe9ntelo de nuevo. ".concat(e))}finally{Q(!1)}},eb=null==g?void 0:null===(e=g.paymentMethods.find(e=>e.title===ex))||void 0===e?void 0:e.details,ev=async e=>{if(e.target.files&&e.target.files.length>0){let t=e.target.files[0];em("paymentProof",e.target.files);try{let e=await M(t,1024,1024,.8),a=URL.createObjectURL(e);G&&URL.revokeObjectURL(G),K(a)}catch(t){console.error("Error compressing image:",t),Y("Error al procesar la imagen. Por favor, intente con otra imagen."),em("paymentProof",void 0),K(null),e.target instanceof HTMLInputElement&&(e.target.value="")}}else em("paymentProof",void 0),K(null),e.target instanceof HTMLInputElement&&(e.target.value="")},eN=async e=>{if(e.preventDefault(),X&&g){ea(!0),er(null),el([]);try{let e=await i.u.get("/tickets/raffle/".concat(g.id,"/email/").concat(encodeURIComponent(X)));e&&Array.isArray(e)?el(e):er("No se encontraron tickets para este email")}catch(e){console.error("Error verifying tickets:",e),er("Error al verificar los tickets. ".concat(e.response.data.message))}finally{ea(!1)}}},ew=()=>{eu({name:"",email:"",confirmEmail:"",phone:"",ticketQuantity:2,referenceCode:"",paymentMethod:"",paymentProof:void 0,accountName:""}),W(2),_(0),K(null),document.getElementById("paymentProof")instanceof HTMLInputElement&&(document.getElementById("paymentProof").value="")};return v?(0,s.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:"Loading..."}):w?(0,s.jsxs)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:["Error: ",w]}):g?(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,s.jsxs)("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12",children:[(0,s.jsx)("h1",{className:"text-3xl sm:text-3xl md:text-4xl font-bold text-center mb-6 md:mb-8",children:g.name}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:gap-8",children:[(0,s.jsxs)(m.Zp,{className:"bg-background/50 backdrop-blur-sm border-muted",children:[(0,s.jsx)(m.aR,{className:"pb-2 md:pb-4",children:(0,s.jsx)(m.ZB,{className:"text-2xl md:text-3xl",children:"Detalles de la Rifa"})}),(0,s.jsxs)(m.Wu,{children:[(0,s.jsx)("div",{className:"aspect-video relative mb-4",children:(null===(t=g.images[0])||void 0===t?void 0:t.url)?(0,s.jsx)(n.default,{src:g.images[0].url,alt:g.name,fill:!0,className:"object-cover rounded-md",onError:e=>{let t=e.target;t.onerror=null,t.src="/placeholder.svg"}}):(0,s.jsx)(n.default,{src:"/placeholder.svg",alt:"Placeholder",fill:!0,className:"object-cover rounded-md"})}),(0,s.jsx)("p",{className:"mb-2",children:g.description}),(0,s.jsxs)("p",{className:"font-semibold",children:["Precio por ticket: $",parseFloat(g.price).toFixed(2)]})]})]}),(0,s.jsxs)(m.Zp,{className:"mt-6 bg-background/80 border-muted",children:[(0,s.jsx)(m.aR,{className:"pb-2",children:(0,s.jsx)(m.ZB,{className:"text-4xl font-bold",children:"Verifica Tus TICKETS"})}),(0,s.jsxs)(m.Wu,{children:[(0,s.jsxs)(L,{className:"mb-6 border-primary border-2",children:[(0,s.jsx)(q.A,{className:"h-5 w-5"}),(0,s.jsx)(A,{className:"text-lg font-semibold",children:"SOPORTE TIENE 24 hrs PARA RESPONDERTE Y APROBAR TU COMPRA"}),(0,s.jsxs)(I,{className:"text-base mt-2 space-y-2",children:[" ",(0,s.jsxs)("p",{className:"font-medium text-lg",children:[" ","\xbfNo recibiste tus tickets por correo? \xa1VERIF\xcdCALOS AQU\xcd!"]}),(0,s.jsx)("p",{className:"mb-10",children:'Simplemente ingresa el correo electr\xf3nico que usaste para la compra en el campo de abajo y haz clic en "Verificar Tickets" para ver los n\xfameros asociados a tu participaci\xf3n en esta rifa.'}),(0,s.jsx)("div",{className:"h-[80px]",children:(0,s.jsxs)("p",{className:"mt-10 text-md font-semibold",children:[" ","CONT\xc1CTANOS POR EL TLF DE SOPORTE: (0424)-1326694"]})})]})]}),(0,s.jsxs)("form",{onSubmit:eN,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(f.J,{htmlFor:"verificationEmail",className:"text-base",children:"Email para Verificar Tickets"})," ",(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(p.p,{id:"verificationEmail",type:"email",value:X,onChange:e=>ee(e.target.value),placeholder:"Ingresa tu email de compra aqu\xed",className:"flex-1 text-base"}),(0,s.jsxs)(u.$,{type:"submit",disabled:et,size:"lg",children:[" ",et?(0,s.jsx)(U.A,{className:"h-5 w-5 animate-spin"}):"Verificar Tickets"]})]})]}),es&&(0,s.jsx)(L,{variant:"destructive",children:(0,s.jsx)(I,{children:es})}),en.length>0&&(0,s.jsxs)("div",{className:"space-y-2 mt-4",children:[(0,s.jsx)("h3",{className:"font-semibold",children:"Tus tickets:"}),(0,s.jsx)("div",{className:"max-h-40 overflow-y-auto border rounded-md p-2",children:en.map(e=>(0,s.jsxs)("div",{className:"flex justify-between items-center py-2 border-b last:border-0",children:[(0,s.jsxs)("div",{className:"font-medium",children:["Ticket:"," ",(0,s.jsx)("span",{className:"text-primary",children:e.ticketNumber})]}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:new Date(e.createdAt).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"})})]},e.id))})]})]})]})]}),(0,s.jsxs)(m.Zp,{className:"bg-background/50 backdrop-blur-sm border-muted",children:[(0,s.jsx)(m.aR,{className:"pb-2 md:pb-4",children:(0,s.jsx)(m.ZB,{className:"text-2xl md:text-3xl",children:"Comprar Tickets"})}),(0,s.jsx)(m.Wu,{children:(0,s.jsxs)("form",{onSubmit:ed(ey),className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(f.J,{htmlFor:"ticketQuantity",children:"Cantidad de Tickets"}),(0,s.jsx)(d.xI,{name:"ticketQuantity",control:ec,render:e=>{let{field:t}=e;return(0,s.jsx)(j,{id:"ticketQuantity",value:t.value.toString(),onValueChange:e=>t.onChange(parseInt(e,10)),className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-4 mt-2",children:[2,5,10,15,20].map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsx)(y,{value:e.toString(),id:"quantity-".concat(e),className:"peer sr-only"}),(0,s.jsx)(f.J,{htmlFor:"quantity-".concat(e),className:"flex flex-col items-center justify-center w-full p-3 sm:p-4 border rounded-lg cursor-pointer transition-colors\n                              ".concat(t.value===e?"bg-primary text-primary-foreground border-primary":"bg-background text-foreground border-input hover:bg-accent hover:text-accent-foreground","\n                              dark:border-gray-600"),children:(0,s.jsxs)("div",{className:"block",children:[(0,s.jsx)("div",{className:"w-full text-base sm:text-lg font-semibold",children:e}),(0,s.jsx)("div",{className:"w-full text-xs sm:text-sm",children:"tickets"})]})})]},e))})}}),ep.ticketQuantity&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:ep.ticketQuantity.message})]}),(0,s.jsxs)(m.Zp,{className:"w-full",children:[(0,s.jsx)(m.aR,{children:(0,s.jsx)(m.ZB,{children:"Conversor USD a Bs"})}),(0,s.jsx)(m.Wu,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(u.$,{type:"button",onClick:()=>{let e=H-1;e>=2&&em("ticketQuantity",e)},disabled:H<=2,children:"-"}),(0,s.jsx)(p.p,{id:"ticketQuantityInput",type:"number",value:H,onChange:e=>{let t=parseInt(e.target.value,10);t>=2&&em("ticketQuantity",t)},className:"w-16 text-center",min:"2"}),(0,s.jsx)(u.$,{type:"button",onClick:()=>{em("ticketQuantity",H+1)},children:"+"})]}),(0,s.jsxs)("div",{className:"bg-muted/50 p-4 rounded-lg space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"font-medium",children:"Total (USD):"}),(0,s.jsxs)("span",{className:"text-xl font-bold",children:["$",$.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"font-medium",children:"Total (Bs):"}),(0,s.jsx)("span",{className:"text-xl font-bold text-primary",children:x?(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)(U.A,{className:"h-4 w-4 animate-spin"}),"Cargando tasa..."]}):"Bs ".concat(eg)})]}),x&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"Obteniendo tasa de cambio actual..."})]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground text-center",children:["Tasa de cambio: 1 USD ="," ",c?c.toFixed(2):"0.00"," Bs"]})]})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(f.J,{htmlFor:"name",children:"Nombre y apellido*"}),(0,s.jsx)(p.p,{id:"name",type:"text",...ei("name")}),ep.name&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:ep.name.message})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(f.J,{htmlFor:"email",children:"Email"}),(0,s.jsx)(p.p,{id:"email",type:"email",...ei("email")}),ep.email&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:ep.email.message})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(f.J,{htmlFor:"confirmEmail",children:"Confirmar Email"}),(0,s.jsx)(p.p,{id:"confirmEmail",type:"email",...ei("confirmEmail")}),ep.confirmEmail&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:ep.confirmEmail.message})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(f.J,{htmlFor:"phone",children:"Tel\xe9fono"}),(0,s.jsx)(p.p,{id:"phone",type:"tel",...ei("phone"),onKeyDown:e=>{!("Backspace"===e.key||"Delete"===e.key||"Tab"===e.key||"Escape"===e.key||"Enter"===e.key||"+"===e.key||/^[0-9]$/.test(e.key))&&e.preventDefault()}}),ep.phone&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:ep.phone.message})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(f.J,{htmlFor:"accountName",children:"Nombre del Titular de la cuenta"}),(0,s.jsx)(p.p,{id:"accountName",type:"text",...ei("accountName")}),ep.accountName&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:ep.accountName.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(f.J,{className:"text-2xl",htmlFor:"paymentMethod",children:"M\xe9todo de Pago"}),(0,s.jsx)(d.xI,{name:"paymentMethod",control:ec,defaultValue:"",rules:{required:"Debe seleccionar un m\xe9todo de pago"},render:e=>{let{field:t}=e;return(0,s.jsxs)(k,{onValueChange:t.onChange,value:t.value,children:[(0,s.jsx)(E,{className:"w-full",children:(0,s.jsx)(C,{placeholder:"Selecciona un m\xe9todo de pago"})}),(0,s.jsx)(S,{children:g.paymentMethods.filter(e=>e.isActive).map(e=>(0,s.jsx)(T,{value:e.title,children:e.title},e.id))})]})}}),ep.paymentMethod&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:ep.paymentMethod.message})]}),eb&&(0,s.jsxs)("div",{className:"bg-muted p-4 rounded-md",children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Detalles de Pago:"}),(0,s.jsx)("pre",{className:"whitespace-pre-wrap",children:eb})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(f.J,{htmlFor:"referenceCode",children:"C\xf3digo de Referencia"}),(0,s.jsx)("p",{className:"text-md mb-2",children:"⚠️ Importante: Coloque la referencia completa del pago (n\xfamero de transacci\xf3n, referencia bancaria, etc.)"}),(0,s.jsx)(p.p,{id:"referenceCode",type:"text",...ei("referenceCode"),placeholder:"Ej: 123456789 o REF-ABC123"}),ep.referenceCode&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:ep.referenceCode.message})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(f.J,{htmlFor:"paymentProof",children:"Comprobante de Pago"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(u.$,{type:"button",variant:"outline",onClick:()=>{var e;return null===(e=document.getElementById("paymentProof"))||void 0===e?void 0:e.click()},className:"w-full",children:"Agregar imagen"}),(0,s.jsx)(p.p,{id:"paymentProof",type:"file",onChange:ev,accept:"image/*",className:"hidden"}),eh&&eh.length>0&&(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:null===(a=eh[0])||void 0===a?void 0:a.name})]}),ep.paymentProof&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:ep.paymentProof.message})]}),G&&(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(n.default,{src:G,alt:"Payment Proof Preview",width:300,height:300,className:"rounded-md object-cover max-w-full h-auto",onError:()=>{Y("Error al cargar la imagen. Por favor, intente con otra imagen."),K(null),em("paymentProof",void 0)}})}),Z&&(0,s.jsxs)(L,{variant:"destructive",children:[(0,s.jsx)(A,{children:"Error"}),(0,s.jsx)(I,{children:Z})]}),(0,s.jsx)(u.$,{type:"submit",className:"w-full",disabled:J,children:J?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(U.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Procesando..."]}):"Comprar Tickets"})]})})]})]})]}),(0,s.jsx)(D.lG,{open:V,onOpenChange:e=>{z(e),e||ew()},children:(0,s.jsxs)(D.Cf,{children:[(0,s.jsxs)(D.c7,{children:[(0,s.jsx)(D.L3,{children:"\xa1Compra Exitosa!"}),(0,s.jsx)(D.rr,{children:"Hemos recibido su compra con \xe9xito. Una vez verifiquemos los datos del pago, recibir\xe1 un correo electr\xf3nico con sus tickets."})]}),(0,s.jsx)("div",{className:"flex justify-end space-x-2",children:(0,s.jsx)(u.$,{onClick:()=>window.location.href="/",children:"Ir al inicio"})})]})})]}):(0,s.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:"No raffle data available"})}},6695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>l,aR:()=>i,wL:()=>m});var s=a(5155),r=a(2115),n=a(9434);let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...r})});l.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...r})});i.displayName="CardHeader";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",a),...r})});d.displayName="CardTitle";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});o.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent";let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...r})});m.displayName="CardFooter"},8779:(e,t,a)=>{"use strict";a.d(t,{u:()=>o});var s=a(3568);let r=e=>s.Ay.error(e);var n=a(3464),l=a(2108);let i=a(9509).env.URL||"https://api.unasolaruedave.com",d=n.A.create({baseURL:i,headers:{"Content-Type":"application/json"}});d.interceptors.request.use(async e=>e),d.interceptors.response.use(e=>e,e=>{var t,a;return((null===(t=e.response)||void 0===t?void 0:t.status)===401||(null===(a=e.response)||void 0===a?void 0:a.status)===404)&&(r("Sesi\xf3n expirada, por favor inicie sesi\xf3n nuevamente"),(0,l.signOut)()),Promise.reject(e)});let o={get:(e,t)=>d.get(e,t).then(e=>e.data),post:(e,t,a)=>d.post(e,t,a).then(e=>e.data),put:(e,t,a)=>d.put(e,t,a).then(e=>e.data),patch:(e,t,a)=>d.patch(e,t,a).then(e=>e.data),delete:(e,t)=>d.delete(e,t).then(e=>e.data)}},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(2596),r=a(9688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[352,802,771,63,801,703,790,441,684,358],()=>t(3311)),_N_E=e.O()}]);